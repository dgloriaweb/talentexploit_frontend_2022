<template>
Here we are
  <ul>
    <li v-for="job in jobs" :key="job.id">
      {{ job.job_name }}
      <Job v-bind:job="job" />
    </li>
  </ul>
</template>

<script>
import Job from "./Job.vue";
export default {
  name: "JobsList",
  data() {
    return {
      jobs: [],
    };
  },
  created: function () {
    this.fetchData();
  },
  methods: {
    fetchData: async function () {
      try {
        const res = await fetch(
          "http://localhost/api/jobs"
        );
        // const jobs = await res.json();
        // const accessToken = req.body.access_token;
        const accessToken = "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiYzY4MDkzZDQ0ZDMyMjZkMGY0MjNhNjVhOTZkNTkxOWFiNGFmNzU3YTI5ZDc4ZDY5YTc1ZjFhOWU3YjQ5MjQ1YzJkYmZlZTNmNDBhZTM2YzciLCJpYXQiOiIxNjExMjMyMzkwLjI4OTUyMiIsIm5iZiI6IjE2MTEyMzIzOTAuMjg5NTI2IiwiZXhwIjoiMTY0Mjc2ODM5MC4yODY2OTYiLCJzdWIiOiIzIiwic2NvcGVzIjpbXX0.LKq6stVmkdoKBTX_MXzowo-6_hT2ZLsyggCPXtqDwJzfe_z5XcXzxoRG2A9MUB8gYtJlToXYqIV0k0Xk-I9zmrazg44HuW4WeJ5QCLPZ3w7-2r9ZtoueA_-CEtmL5cEd_0pDhbVIiEtc6l4D6m0S5cInWQEGI0JJMXcHWB87_cNg61msFEtGvpElsqNAyC4VHOWHCOK1MwkBS3eUcLdGFXOSIuA6RxNag5jQT91UQo8ZQIM3HoVcSUxXtjmiIHPskUv09rxlR8gavEDzWrPeSX3LuIo3ppSoWJdz1F43mQ0IkqklLdO2RKca2W7Np8TURvRxuIk1GlyLNzStuIXUQxK5MnSCqgmzsKWIgbV0Xf2M-5axQ2oW1zX07i2_zwt4PjMmvdcPKODTzY7aaPfwJeEqJ1n-ZXg7dNxfmT2daCQhegrz78UYwRutjmBaVikWA3W4Cs6CbvwqAD0saqclOuZPxxmRMvmPcMUvKG5inViJ3-oS6kU9rg1fBtjRN9meem3iVNq5aT2Oy2Da3hAHmtVvBT7dJ-tsGhRMklc6m5MdENXxfILayOME_xfBGnsJ2NHOhTH-slAW0KbCev6Nv9r07UDuYTk-YPWV01fdMmPVTq1t-vSPxutaZPy6_Ka5uBvJ_spI2GGyffsRTSJJyjyZX1wDbA0dnrfgsCZpgSo";
        const jobs = await res.json(accessToken);

        this.jobs = jobs.data;
      } catch (e) {
        console.log(e);
      }
    },
  },
  components: {
    Job
  },
};
</script>

<style lang="scss" scoped>
</style>