<template>
  <div id="myGridContainer">
    <div id="myGridColumn">
      <h1>List of Recommended Jobs</h1>
      <br />
      <div id="ratesContainer">
        <div v-if="match_rates">
          <div v-for="job in match_rates" :key="job.id" id="myGridRow">
            <div class="grid-cell-1">
              <router-link
                :to="{ name: 'Job Detail', params: { id: job.id } }"
                >{{ job.job_name }}</router-link
              >
            </div>
            <div class="grid-cell-2">
              {{ job.job_rate }}
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="myGridColumn">
      <h1>List of your preferences/settings</h1>
      <br />
      <div id="settingsContainer">
        <div v-if="person_data">
          <div v-for="person in person_data" :key="person.id" id="myGridRow">
            <div class="grid-cell-1">
              <h2>Personal Preferences</h2>
              <h3>Usual work location</h3>
              <div>
                Work should be in the workplace:
                {{ person.workplace ? "yes" : "no" }}
              </div>
              <div>Usually remote: {{ person.remote ? "yes" : "no" }}</div>
              <br />
              <h3>Usual working days</h3>
              <br />
              <div>
                Work workdays only: {{ person.workdays ? "yes" : "no" }}
              </div>
              <div>
                Work Saturdays too: {{ person.saturday ? "yes" : "no" }}
              </div>
              <div>Work Sundays too: {{ person.sunday ? "yes" : "no" }}</div>
              <div>
                Work bank holidays too:
                {{ person.bank_holidays ? "yes" : "no" }}
              </div>
              <h4>Special working days</h4>
              <div>
                Has to work only Saturdays, Sundays and Bank holidays:
                {{ person.sat_sun_bh_only ? "yes" : "no" }}
              </div>
              <br />
              <h3>Usual working hours</h3>
              <div>Normal hours: {{ person.normal_hours ? "yes" : "no" }}</div>
              <div>Nightshift: {{ person.nightshift ? "yes" : "no" }}</div>
              <div>Other shift: {{ person.other_shift ? "yes" : "no" }}</div>
              <h4>Special working hours</h4>
              <div>
                Nightshift only: {{ person.nightshift_only ? "yes" : "no" }}
              </div>
              <div>
                Other shift only: {{ person.other_shift_only ? "yes" : "no" }}
              </div>
              <h3>Other</h3>
              <div>Must do overtime: {{ person.overtime ? "yes" : "no" }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import jobService from '../services/job.service'
// import axios from "axios"

export default {
  name: "Home",
  data() {
    return {
      successful: false,
      match_rates: null,
      content: null,
      error: null,
      person_data: null,
    }
  },
  created() {
    this.fetchData()

  },
  methods: {
    fetchData() {
      // this.getMyJobs()
      jobService.getMyJobs().then(
        (response) => {
          this.content = response
          this.match_rates = this.content.data.all_job_match_rates
          this.person_data = this.content.data.person
          console.log(this.content.data.all_job_match_rates)
        },
        (error) => {
          this.error =
            error?.response?.data?.message || error.message
        }
      )
    }
  }
}
</script>

<style  scoped>
#myGridContainer {
  background: rgb(53, 52, 52);
  width: fit-content;
  display: flex;
  gap: 35px;
}
#myGridColumn {
  padding: 15px;
}
#myGridRow {
  display: grid;
  grid-template-columns: 3fr 1fr;
  padding: 10px;
}
#ratesContainer,
#settingsContainer {
  background: grey;
}
.grid-cell-1 {
  width: max-content;
}
.grid-cell-2 {
  text-align: right;
}
.grid-cell-2:after {
  content: "%";
}
</style>