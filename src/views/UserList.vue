<template>
  Here we are
  {{ users }}
  <ul>
    <li v-for="user in users" :key="user.id">
      {{ user.user_name }}
      <user v-bind:user="user" />
    </li>
  </ul>
</template>

<script>
import User from "./User.vue"
import axios from "axios"

export default {
  name: "UserList",
  data() {
    return {
      users: [],
    }
  },
  created: function () {
    this.fetchData()
  },
  methods: {
    ///* this is cool for get methods. */
    // fetchData: async function () {
    //   try {
    //     // const headers = {
    //     //   "client_id": 3,
    //     //   "client_secret": '6TKH3Tqu0PL7K7zBPkIMTaatjJOz5T1AMnNu83Wa',
    //     //   'grant_type': 'authorization_code',
    //     //   // 'username': 'dgloria',
    //     //   // 'name': 'dgloria',
    //     //   // 'password': 'admin123',
    //     //   'scope': '',
    //     // }
    //     const headers = {
    //       "name": "dgloria",
    //       "email": "dgloria@freemail.hu",
    //       "password": "admin123",
    //       "password_confirmation": "admin123"
    //     }
    //     const res = await fetch("https://talentexploit.com/api/login", { headers })
    //     const users = await res.json()
    //     console.log(users)
    //     this.users = users
    //   } catch (e) {
    //     console.log(e)
    //   }
    // },
    fetchData: async function () {
      try {
        const headers = {
          "name": "dgloria",
          "email": "dgloria@freemail.hu",
          "password": "admin123",
          "password_confirmation": "admin123"
        }
        const response = await axios.post('https://talentexploit.com/api/login', { headers })
        console.log(response.data);
      }
      catch (error) {
        console.log(error)
      }
    }

  },
  components: {
    User
  },
};
</script>

<style lang="scss" scoped>
</style>