import axios from 'axios'
import authHeader from './auth-header'

class JobService {
  getJobs() {
    return axios.get(process.env.VUE_APP_API_URL + '/api/jobs', {
      headers: authHeader(),
    })
  }
  getMyJobs = async () => {
    var storageItem = localStorage.getItem('user')
    this.access_token = JSON.parse(storageItem)['token']
    this.userId = JSON.parse(storageItem)['userId']
    if (this.access_token) {
      try {
        //api call to get jobs
        const url = process.env.VUE_APP_API_URL + '/api/home'

        const response = await axios.get(url, {
          headers: {
            Authorization: 'Bearer ' + this.access_token,
          },
          params: {
            userId: this.userId,
          },
        })
        return response
      } catch (error) {
        console.log(error)
      }
    } else {
      console.log('no token, relogin.')
    }
  }
}

export default new JobService()
